# Парсер онлайн-библиотеки tululu
Данный скрипт скачивает все тексты и картинки книг с сайта tululu.org в разделе "Научная фантастика". 
Также скачиваются комментарии к книге и дополнительная информация в JSON-файл.
### Как установить
* Скачайте код
* Запустите команду `pip install -r requirements.txt` для получения актуальной версии библиотек
* Запустите скрипт командой `python3 main.py`
Скрипт создаст папки `books` и `images`, хранящие тексты и обложки книг соответственно, а также файл `book_info.json`, хранящий подробное описание (с комментариями пользователей) каждой книги.
### Структура JSON-файла
Файл `book_info.json` включает в себя следующие поля: имя автора, название книги, пути к файлам с изображениями и текстами, комментарии к книге, жанр книги.
Пример:
```
    [{
        "title": "Войны Сорока Островов (Часть первая)",
        "author": "Лукьяненко Сергей Васильевич",
        "img_src": "itog\\images\\nopic.gif",
        "book_path": "itog\\book_dir\\Войны Сорока Островов (Часть первая)",
        "comments": [
            "В последних словах объясняющих книгу в целом, я просто остановился и думал..., а ведь правда всё именно так. ",
            "Администратор, модератор, в общем тот человек, что отвечает за расположение книг. Повесть называется \"Рыцари сорока островов\". Было бы неплохо исправить;)",
            "Книга хорошая. Давал детям читать когда им было по 10-12 лет, нравилась. И сейчас о ней хорошо вспоминают. Согласен, что книга сложная, но дети читали на одном дыхании, спрашивали продолжения, книга не просто читалась, а еще заставляла думать, сопереживать. Продолжение нужно!!!",
            "Понравилось, жду продолжения!!!",
            "Если вы еще не читали Лукьяненко, советую начинать с этой книги. Она, как простая но забойная песня в концерте, покажет вам, ваш ли это автор. (Мне ОЧЕНЬ нравтися)."
        ],
        "genres": [
            "Детская фантастика",
            "Научная фантастика"
        ]
    }]
```
### Аргументы
Данный скрипт поддерживает следующий набор аргументов:
* `--start_page` позволяет скачивать книги, начиная с определенной страницы (по умолчанию с первой);
* `--end_page` позволяет скачивать книги до определенной страницы (по умолчанию 701);
* `--dest_folder` меняет директорию, где будут расположены папки и JSON-файл (по умолчанию все данные сохраняются в текущей папке);
* `--json_path` меняет директорию для JSON-файла (по умолчанию в текущей папке). 

<b>Важно: расположение файла при использовании этой опции приоритетнее, чем использование `dest_folder`!</b>

Пример: при одновременно заданном `--dest_folder a/b/c` и `--json_path d` папки `books` и `images` будут иметь путь `a/b/c/books` и `a/b/c/images`, но JSON-файл будет расположен в `d/book_info.json`
* `--skip_imgs` пропускает скачивание изображений (по умолчанию отключено);
* `--skip_txt` пропускает скачивание текста (по умолчанию отключено);

### Примеры запуска

* `python3 main.py --dest_folder a --skip_imgs --skip_txt` сохраняет JSON-файл в папку `a`, не скачивая ничего больше
* `python3 main.py --start_page 4 --json_path b` скачивает все данные, начиная с четвертой страницы в текущую директорию, а JSON-файл сохраняет в папку `b`
* `python3 main.py --end_page 2 --dest_folder b --json_path b/c` скачивает данные первух двух страниц в папку `b`, а для JSON-файла создает подпапку `b/c`

### Цель проекта

Код написан в образовательных целях на онлайн-курсе для веб-разработчиков [dvmn.org](https://dvmn.org/).
